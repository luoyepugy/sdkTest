define(["./module","cordova"],function(e){e.factory("cameraService",["$q","$ionicPopup","$cordovaFileTransfer","$cordovaCamera","$ionicLoading",function(e,t,o,a,r){var i={};return i.getPicture=function(o,r){var i=e.defer();return 0===o?o={destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA}:1===o&&(o={destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.PHOTOLIBRARY}),a.getPicture(o).then(function(e){i.resolve(e)},function(e){t.alert({title:"提示",template:r,okText:"确定",okType:"button-balanced"})}),i.promise},i.uploadPicture=function(a){var i={fileKey:"file",fileName:a.substr(a.lastIndexOf("/")+1),chunkedMode:!1,mimeType:"image/jpg",params:{directory:"upload",fileName:a.substr(a.lastIndexOf("/")+1)}},n=e.defer();return o.upload("http://www.baidu.com",a,i).then(function(e){n.resolve(e)},function(e){t.alert({title:"提示",template:JSON.stringify(e),okText:"确定",okType:"button-balanced"})},function(e){var t=e.loaded/e.total*100;r.show({template:"已经下载："+Math.floor(t)+"%"}),t>99&&r.hide()}),n.promise},i}])});