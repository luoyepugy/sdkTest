define(["./module"],function(e){e.controller("changePwdCtrl",["$scope","$http","validateService","httpService","userService","messageService",function(e,s,n,o,t,r){e.user=t.user,e.submit=function(){var s,i;if(s=n.isEmpty(".j-form input"),1!==s)return r.show(s),!1;if(i=n.submitData(".j-form"),i.newPwd.length<4)r.show("请输入至少4位密码");else if(i.newPwd!==i.confirmPwd)r.show("两次密码输入不一致");else{var w=o.getData("./json/change-passwor.json",i);w.then(function(s){r.show(s.message),t.user.password=e.user.newPwd,delete t.user.newPwd,window.location="#/home"})}}}])});