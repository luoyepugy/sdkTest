define(["./module"],function(e){e.directive("ionicTime",["$ionicModal","$timeout","$ionicScrollDelegate","timeService",function(e,t,a,i){return{restrict:"AE",replace:!0,template:'<input type="text" name="time" placeholder={{tm.placeholder}} ng-model="timedata" value="{{timedata}}" readonly>',scope:{timedata:"="},link:function(n,o,l){timeModel=null;var r=n.tm={};r.hourHandle="hourHandle",r.minuteHandle="minuteHandle",r.placeholder=l.placeholder||"未设置",r.okText=l.oktext||"完成",r.barCssClass=l.barcssclass||"bar-dark",r.datas=i.timeList,r.tag=l.tag||":",r.returnOk=function(){timeModel&&timeModel.hide()},r.getData=function(e){var i,o;switch(t.cancel(r.scrolling),t.cancel(r.dataing),r.hourData=r.datas.hourData,r.minuteData=r.datas.minuteData,e){case"hour":if(!r.hourData)return!1;var l=!0;i=r.hourData.length,o=r.hourHandle;break;case"minute":if(!r.minuteData)return!1;var m=!0;i=r.minuteData.length,o=r.minuteHandle;break;default:r.hour=r.hourData[0],r.minute=r.minuteData[0]}var d=a.$getByHandle(o).getScrollPosition().top,u=Math.round(d/36);0>u&&(u=0),u>i-1&&(u=i-1),d===36*u?r.dataing=t(function(){l&&(r.hour=r.hourData[u]),m&&(r.minute=r.minuteData[u]),n.timedata=r.hour.name+r.tag+r.minute.name},150):r.scrolling=t(function(){a.$getByHandle(o).scrollTo(0,36*u,!0)},150)},o.on("click",function(){return l.checked?void(timeModel&&timeModel.show()):(timeModel&&timeModel.remove(),l.checked=!0,void e.fromTemplateUrl("./js/templates/timeTemp.html",{scope:n,animation:"slide-in-up",backdropClickToClose:!0}).then(function(e){timeModel=e,t(function(){r.getData(),timeModel&&timeModel.show()},100)}))}),n.$on("$destroy",function(){timeModel&&timeModel.remove()})}}}])});