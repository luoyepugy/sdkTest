define(["./module","cordova"],function(e){e.factory("geoService",["$q, $http","$cordovaGeolocation",function(e,t,n){var r={};return r.getGeolocation=function(){var r=e.defer(),i={timeout:1e4,enableHighAccuracy:!1};return n.getCurrentPosition(i).then(function(e){var n=e.coords.latitude,i=e.coords.longitude;t.post("http://www.baidu.com",{lat:n,lng:i}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e.message)})},function(e){switch(e.code){case e.PERMISSION_DENIED:alert("请打开定位功能！");break;case e.POSITION_UNAVAILABLE:alert("不支持定位服务！");break;case e.TIMEOUT:alert("请求超时！");break;case e.UNKNOWN_ERROR:alert("未知异常！")}}),r.promise},r}])});