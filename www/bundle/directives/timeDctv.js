define(["./module"],function(e){e.directive("ionicTime",["$ionicModal","$timeout","$ionicScrollDelegate","timeService",function(e,t,n,r){return{restrict:"AE",replace:!0,template:'<input type="text" name="time" placeholder={{tm.placeholder}} ng-model="timedata" value="{{timedata}}" readonly>',scope:{timedata:"="},link:function(s,o,u){timeModel=null;var f=s.tm={};f.hourHandle="hourHandle",f.minuteHandle="minuteHandle",f.placeholder=u.placeholder||"未设置",f.okText=u.oktext||"完成",f.barCssClass=u.barcssclass||"bar-dark",f.datas=r.timeList,f.tag=u.tag||":",f.returnOk=function(){timeModel&&timeModel.hide()},f.getData=function(e){var r,i;switch(t.cancel(f.scrolling),t.cancel(f.dataing),f.hourData=f.datas.hourData,f.minuteData=f.datas.minuteData,e){case"hour":if(!f.hourData)return!1;var o=!0;r=f.hourData.length,i=f.hourHandle;break;case"minute":if(!f.minuteData)return!1;var u=!0;r=f.minuteData.length,i=f.minuteHandle;break;default:f.hour=f.hourData[0],f.minute=f.minuteData[0]}var l=n.$getByHandle(i).getScrollPosition().top,c=Math.round(l/36);0>c&&(c=0),c>r-1&&(c=r-1),l===36*c?f.dataing=t(function(){o&&(f.hour=f.hourData[c]),u&&(f.minute=f.minuteData[c]),s.timedata=f.hour.name+f.tag+f.minute.name},150):f.scrolling=t(function(){n.$getByHandle(i).scrollTo(0,36*c,!0)},150)},o.on("click",function(){return u.checked?void (timeModel&&timeModel.show()):(timeModel&&timeModel.remove(),u.checked=!0,void e.fromTemplateUrl("./js/templates/timeTemp.html",{scope:s,animation:"slide-in-up",backdropClickToClose:!0}).then(function(e){timeModel=e,t(function(){f.getData(),timeModel&&timeModel.show()},100)}))}),s.$on("$destroy",function(){timeModel&&timeModel.remove()})}}}])});