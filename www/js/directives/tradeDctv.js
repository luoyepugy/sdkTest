define(["./module"],function(e){e.directive("tradeList",["httpService","$ionicLoading","messageService",function(e,t,n){return{restrict:"E",templateUrl:"./js/views/tradeTemp.html",replace:!0,scope:{list:"=",page:"@"},link:function(o,i,a){var s=a.lastId,r=a.page;o.show=!1,o.hasMore=!0,t.show({template:"<ion-spinner></ion-spinner><h3>加载中...</h3>",duration:3e3});var h=e.getData("../../json/trade.json",{page:r});h.then(function(e){t.hide();var n=e.data.items;o.list=n,s=n[n.length-1].id},function(e){n.show(e)}),o.doRefresh=function(){var i=e.getData("../../json/trade-more.json",{page:r,status:"refresh"});i.then(function(e){t.hide();var n=e.data.items;o.list=n,s=n[n.length-1].id,o.$broadcast("scroll.refreshComplete")},function(e){n.show(e)})},o.loadMore=function(){var t=e.getData("../../json/trade-more.json",{page:r,status:"loadmore",id:s});t.then(function(e){for(var t=e.data.items,n=0;n<t.length;n++)o.list.push(t[n]),s=t[t.length-1].id;0===t.length&&(o.hasMore=!1),o.$broadcast("scroll.infiniteScrollComplete")},function(e){n.show(e)})},o.toggle=function(){this.show=!this.show}}}}])});