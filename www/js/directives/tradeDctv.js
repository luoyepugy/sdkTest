define(["./module"],function(e){e.directive("tradeList",["httpService","$ionicLoading",function(e,t){return{restrict:"E",templateUrl:"./js/templates/tradeTemp.html",replace:!0,scope:{list:"=",page:"@"},link:function(n,o,a){var i=a.lastId,s=a.page;n.show=!1,n.hasMore=!0,t.show({template:"<ion-spinner></ion-spinner><h3>加载中...</h3>",duration:3e3}),e.getData("./json/trade.json",{page:s}).then(function(e){t.hide();var o=e.data.items;n.list=o,i=o[o.length-1].id}),n.doRefresh=function(){e.getData("./json/trade-more.json",{page:s,status:"refresh"}).then(function(e){t.hide();var o=e.data.items;n.list=o,i=o[o.length-1].id,n.$broadcast("scroll.refreshComplete")})},n.loadMore=function(){e.getData("./json/trade-more.json",{page:s,status:"loadmore",id:i}).then(function(e){for(var t=e.data.items,o=0;o<t.length;o++)n.list.push(t[o]),i=t[t.length-1].id;0===t.length&&(n.hasMore=!1),n.$broadcast("scroll.infiniteScrollComplete")})},n.toggle=function(){this.show=!this.show}}}}])});