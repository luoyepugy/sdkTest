define(["./module","cordova"],function(e){e.factory("cameraService",["$q","$ionicPopup","$cordovaFileTransfer","$cordovaCamera",function(e,t,r,o){var a={};return a.getPicture=function(r,a){var i=e.defer();return 0===r?r={destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA}:1===r&&(r={destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.PHOTOLIBRARY}),o.getPicture(r).then(function(e){i.resolve(e)},function(e){t.alert({title:"提示",template:a,okText:"确定",okType:"button-balanced"})}),i.promise},a.uploadPicture=function(o){var a={fileKey:"file",fileName:o.substr(o.lastIndexOf("/")+1),chunkedMode:!1,mimeType:"image/jpg",params:{directory:"upload",fileName:o.substr(o.lastIndexOf("/")+1)}},i=e.defer();return r.upload("http://www.baidu.com",o,a).then(function(e){i.resolve(e)},function(e){t.alert({title:"提示",template:JSON.stringify(e),okText:"确定",okType:"button-balanced"})},function(e){var r=Math.floor(e.loaded/e.total*100);$scope.progressPercent=r+"%";var o=t.show({template:'<div class="progressBar"><i class="progressBar-current" style="width: {{progressPercent}}"></i></div>',title:"当前上传进度",scope:$scope});100===r&&o.close()}),i.promise},a}])});