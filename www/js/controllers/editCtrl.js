define(["./module"],function(t){t.controller("editCtrl",["$scope","$ionicActionSheet","validateService","userService","httpService","messageService","cameraService",function(t,e,n,i,c,o,u){function r(){u.getPicture(0,"拍摄照片失败").then(function(t){a(t)})}function a(e){u.uploadPicture(e).then(function(e){t.user.avatar="http://pic.pptbz.com/pptpic/201204/2012041411433867_S.jpg"})}function s(){u.getPicture(1,"获取照片失败").then(function(t){f(t)})}function f(e){u.uploadPicture(e).then(function(n){t.user.avatar=e})}t.user=i.user,t.submit=function(){var e,u;if(e=n.isEmpty(".j-form .j-input"),1!==e)return o.show(e),!1;u=n.submitData(".j-form");var r=c.getData("./json/change-password.json",u);r.then(function(e){i.user=t.user,o.show("修改成功"),window.location="#/home"},function(t){o.show(t)})},t.takePhoto=function(){e.show({titleText:"ActionSheet Example",buttons:[{text:"拍照上传"},{text:"从相册选择"}],cancelText:"取消",cancel:function(){return!0},buttonClicked:function(t){return 0===t?document.addEventListener("deviceready",r,!1):1===t&&document.addEventListener("deviceready",s,!1),!0}})}}])});