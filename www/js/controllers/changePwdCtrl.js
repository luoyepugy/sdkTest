define(["./module"],function(e){e.controller("changePwdCtrl",["$scope","$http","validateService","httpService","userService","messageService",function(e,n,s,o,t,r){e.user=t.user,e.submit=function(){var n,i;if(n=s.isEmpty(".j-form input"),1!==n)return r.show(n),!1;if(i=s.submitData(".j-form"),i.newPwd.length<4)r.show("请输入至少4位密码");else if(i.newPwd!==i.confirmPwd)r.show("两次密码输入不一致");else{var w=o.getData("../../json/change-password.json",i);w.then(function(n){r.show(n.message),t.user.password=e.user.newPwd,delete t.user.newPwd,window.location="../../#/home"},function(e){r.show(e)})}}}])});